<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Automatic Light On/Off</title>
  <style>
    :root { --bg: #0f172a; --bulb-off: #2c2c2c; --bulb-on: #ffd54a; --text: #e5e7eb; }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100svh; display: grid; place-items: center;
      background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      transition: background 400ms ease;
    }

    .scene { display: grid; gap: 16px; place-items: center; text-align: center; }

    .lamp {
      width: 180px; height: 180px; border-radius: 50%; position: relative;
      background: radial-gradient(circle at 50% 35%, #3a3a3a 0 55%, #222 56% 100%);
      box-shadow: inset 0 0 18px rgba(0,0,0,.8);
      transition: transform 250ms ease;
    }

    .lamp::before { /* socket */
      content: ""; position: absolute; top: -34px; left: 50%; transform: translateX(-50%);
      width: 64px; height: 36px; border-radius: 10px 10px 4px 4px;
      background: linear-gradient(#555, #333);
      box-shadow: 0 4px 8px rgba(0,0,0,.35);
    }

    .lamp::after { /* cord */
      content: ""; position: absolute; top: -200px; left: 50%; transform: translateX(-50%);
      width: 6px; height: 200px; background: #1f2937; border-radius: 3px;
    }

    .glow { /* the bulb light */
      position: absolute; inset: 0; border-radius: 50%; filter: blur(20px); opacity: 0; pointer-events: none;
      transition: opacity 300ms ease;
      background: radial-gradient(circle at 50% 45%, var(--bulb-on), rgba(255,213,74,.12) 35%, rgba(255,213,74,0) 70%);
    }

    .status { font-size: 1.25rem; font-weight: 600; letter-spacing: .06em; }

    .controls { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    button {
      appearance: none; border: 0; padding: 10px 14px; border-radius: 14px; cursor: pointer; font-weight: 600;
      background: #111827; color: #e5e7eb; box-shadow: 0 8px 20px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
      transition: transform 120ms ease, background 200ms ease, opacity 200ms ease;
    }
    button:hover { transform: translateY(-1px); }
    button:active { transform: translateY(0); }
    button[aria-pressed="true"] { background: #374151; }

    .on body { background: #0b1225; }

    /* Light ON state */
    .is-on .lamp {
      background: radial-gradient(circle at 50% 45%, #fff6c4 0 45%, #ffe680 46% 60%, #f7d25c 61% 100%);
      box-shadow: inset 0 0 12px rgba(255,255,255,.7), 0 0 80px rgba(255,213,74,.45);
      transform: scale(1.01);
    }
    .is-on .glow { opacity: 1; }

    .hint { opacity: .75; font-size: .9rem; }
    .timer { font-variant-numeric: tabular-nums; opacity: .85; }
  </style>
</head>
<body>
  <main class="scene" aria-live="polite">
    <div id="lampWrap" class="lamp" role="img" aria-label="Light bulb">
      <div class="glow" aria-hidden="true"></div>
    </div>
    <div class="status">Light: <span id="state">OFF</span></div>
    <div class="timer">Switching in <span id="count">‚Äî</span> s</div>
    <div class="controls">
      <button id="toggleAuto" aria-pressed="true">‚èØÔ∏è Pause Auto</button>
      <button id="flipOnce">üîÅ Flip Now</button>
      <button id="reset">‚ôªÔ∏è Reset</button>
    </div>
    <div class="hint">Tip: Change <code>INTERVAL_MS</code> in the script to adjust speed.</div>
  </main>

  <script>
    // === Config ===
    const INTERVAL_MS = 1000; // how often to toggle (in milliseconds)

    // === State ===
    let isOn = false;
    let timer = null;
    let nextSwitchAt = Date.now() + INTERVAL_MS;

    // === Elements ===
    const lampWrap = document.getElementById('lampWrap');
    const stateEl = document.getElementById('state');
    const countEl = document.getElementById('count');
    const btnToggleAuto = document.getElementById('toggleAuto');
    const btnFlipOnce = document.getElementById('flipOnce');
    const btnReset = document.getElementById('reset');

    // === Functions ===
    function render() {
      document.body.classList.toggle('is-on', isOn);
      lampWrap.parentElement.classList.toggle('is-on', isOn);
      stateEl.textContent = isOn ? 'ON' : 'OFF';
    }

    function flip() {
      isOn = !isOn;
      render();
    }

    function startAuto() {
      stopAuto();
      nextSwitchAt = Date.now() + INTERVAL_MS;
      timer = setInterval(() => {
        flip();
        nextSwitchAt = Date.now() + INTERVAL_MS;
      }, INTERVAL_MS);
      btnToggleAuto.textContent = '‚èØÔ∏è Pause Auto';
      btnToggleAuto.setAttribute('aria-pressed', 'true');
    }

    function stopAuto() {
      if (timer) { clearInterval(timer); timer = null; }
      btnToggleAuto.textContent = '‚ñ∂Ô∏è Resume Auto';
      btnToggleAuto.setAttribute('aria-pressed', 'false');
      countEl.textContent = '‚Äî';
    }

    function tick() {
      if (!timer) return;
      const remaining = Math.max(0, Math.ceil((nextSwitchAt - Date.now()) / 1000));
      countEl.textContent = remaining.toString();
      requestAnimationFrame(tick);
    }

    // === Events ===
    btnToggleAuto.addEventListener('click', () => {
      if (timer) { stopAuto(); } else { startAuto(); tick(); }
    });

    btnFlipOnce.addEventListener('click', () => {
      stopAuto();
      flip();
    });

    btnReset.addEventListener('click', () => {
      isOn = false; render(); startAuto(); tick();
    });

    // === Init ===
    render();
    startAuto();
    tick();
  </script>
</body>
</html>